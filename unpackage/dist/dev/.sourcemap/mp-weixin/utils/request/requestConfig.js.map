{"version":3,"file":"requestConfig.js","sources":["utils/request/requestConfig.js"],"sourcesContent":["export async function reqConfig(ins, options, successHandler = null, failHandler = null, completeHandler = null) {\r\n    ins.baseUrl = options.baseUrl || ins.baseUrl;\r\n    ins.header = options.header || ins.header;\r\n    let config = {\r\n        url: ins.baseUrl + options.url,\r\n        header: ins.header\r\n    }\r\n    if (ins.requestInterceptor) {\r\n        let _config = null;\r\n        try {\r\n            _config = await ins.requestInterceptor(Object.assign({}, options, config));\r\n        } catch (e) {\r\n            //TODO handle the exception\r\n            return false\r\n        }\r\n        if (!_config || typeof _config !== 'object') {\r\n            return false\r\n        }\r\n        Object.assign(options, _config)\r\n        config.url = _config.url;\r\n        config.header = _config.header;\r\n        const { type = 'request' } = options;\r\n        if (type === 'request') {\r\n            config['data'] = options.data || options.params || {};\r\n            config['method'] = options.method || 'GET';\r\n            config['dataType'] = options.dataType || 'json';\r\n            config['responseType'] = options.responseType || 'text';\r\n        } else if (type === 'upload') {\r\n            config['fliePath'] = options.fliePath;\r\n            config['name'] = options.name;\r\n            config['method'] = options.method || \"POST\";\r\n            config['formData'] = options.formData;\r\n            config[\"fileType\"] = options.fileType || \"image\"\r\n            delete config['header'][\"Content-Type\"];\r\n        }\r\n    }\r\n    return config;\r\n}"],"names":[],"mappings":";AAAO,eAAe,UAAU,KAAK,SAAS,iBAAiB,MAAM,cAAc,MAAM,kBAAkB,MAAM;AAC7G,MAAI,UAAU,QAAQ,WAAW,IAAI;AACrC,MAAI,SAAS,QAAQ,UAAU,IAAI;AACnC,MAAI,SAAS;AAAA,IACT,KAAK,IAAI,UAAU,QAAQ;AAAA,IAC3B,QAAQ,IAAI;AAAA,EACf;AACD,MAAI,IAAI,oBAAoB;AACxB,QAAI,UAAU;AACd,QAAI;AACA,gBAAU,MAAM,IAAI,mBAAmB,OAAO,OAAO,IAAI,SAAS,MAAM,CAAC;AAAA,IAC5E,SAAQ,GAAG;AAER,aAAO;AAAA,IACV;AACD,QAAI,CAAC,WAAW,OAAO,YAAY,UAAU;AACzC,aAAO;AAAA,IACV;AACD,WAAO,OAAO,SAAS,OAAO;AAC9B,WAAO,MAAM,QAAQ;AACrB,WAAO,SAAS,QAAQ;AACxB,UAAM,EAAE,OAAO,UAAW,IAAG;AAC7B,QAAI,SAAS,WAAW;AACpB,aAAO,MAAM,IAAI,QAAQ,QAAQ,QAAQ,UAAU;AACnD,aAAO,QAAQ,IAAI,QAAQ,UAAU;AACrC,aAAO,UAAU,IAAI,QAAQ,YAAY;AACzC,aAAO,cAAc,IAAI,QAAQ,gBAAgB;AAAA,IAC7D,WAAmB,SAAS,UAAU;AAC1B,aAAO,UAAU,IAAI,QAAQ;AAC7B,aAAO,MAAM,IAAI,QAAQ;AACzB,aAAO,QAAQ,IAAI,QAAQ,UAAU;AACrC,aAAO,UAAU,IAAI,QAAQ;AAC7B,aAAO,UAAU,IAAI,QAAQ,YAAY;AACzC,aAAO,OAAO,QAAQ,EAAE,cAAc;AAAA,IACzC;AAAA,EACJ;AACD,SAAO;AACX;;"}